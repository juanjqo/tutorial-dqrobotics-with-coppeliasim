
<!DOCTYPE html>


<html lang="en" data-content_root="../../" data-theme="light">

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Minimal example: synchronous mode &#8212; tutorial-dqrobotics-with-coppeliasim 0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.custom.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster.bundle.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-shadow.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-punk.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-noir.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-light.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/tooltipster-sideTip-borderless.min.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/micromodal.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=cef8158c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/jquery.js?v=5d32c60e"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../../_static/documentation_options.js?v=e1a75a79"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/hoverxref.js"></script>
    <script src="../../_static/js/tooltipster.bundle.min.js"></script>
    <script src="../../_static/js/micromodal.min.js"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'get_started/coppeliasim_basics/synchronous';</script>
    <link rel="icon" href="../../_static/logo.svg"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Kinematic world" href="../kinematic_world/index.html" />
    <link rel="prev" title="Minimal example: asynchronous mode" href="minimal_example.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="light">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    
    
    
    <img src="../../_static/logo.svg" class="logo__image only-light" alt="MyProject"/>
    <script>document.write(`<img src="../../_static/logo.svg" class="logo__image only-dark" alt="MyProject"/>`);</script>
  
  
    <p class="title logo__title">Home</p>
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Get started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../advanced/index.html">
    Advanced topics
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/dqrobotics/learning-dqrobotics-in-matlab">
    Learn DQ Robotics
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://ros2-tutorial.readthedocs.io/en/latest/">
    Learn ROS2
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" ">
  <a class="nav-link dropdown-item nav-external" href="https://hal.science/hal-01478225v1">
    Learn Dual Quaternion Algebra
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/juanjqo/tutorial-dqrobotics-with-coppeliasim" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://dqrobotics.github.io/" title="DQ Robotics" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://raw.githubusercontent.com/juanjqo/tutorial-dqrobotics-with-coppeliasim/main/docs/_static/basics/dqrobotics_logo_infinity2.svg" class="icon-link-image" alt="DQ Robotics"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../index.html">
    Get started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../../advanced/index.html">
    Advanced topics
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://github.com/dqrobotics/learning-dqrobotics-in-matlab">
    Learn DQ Robotics
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://ros2-tutorial.readthedocs.io/en/latest/">
    Learn ROS2
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-external" href="https://hal.science/hal-01478225v1">
    Learn Dual Quaternion Algebra
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/juanjqo/tutorial-dqrobotics-with-coppeliasim" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
            
          
          
          
          
          
          
          
          
          
          <a href="https://dqrobotics.github.io/" title="DQ Robotics" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="https://raw.githubusercontent.com/juanjqo/tutorial-dqrobotics-with-coppeliasim/main/docs/_static/basics/dqrobotics_logo_infinity2.svg" class="icon-link-image" alt="DQ Robotics"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../preamble/index.html"><strong>Preamble</strong></a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../preamble/installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preamble/example_scene.html">One scene to rule them all</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="index.html"><strong>Fundamentals on CoppeliaSim</strong></a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="interface.html">Knowing the user interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="engines.html">Engines</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulation_parameters.html">Simulation parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="ports.html">Enabling ports</a></li>
<li class="toctree-l2"><a class="reference internal" href="minimal_example.html">Minimal example: asynchronous mode</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">Minimal example: synchronous mode</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../kinematic_world/index.html"><strong>Kinematic world</strong></a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../kinematic_world/objects.html">Interacting with objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kinematic_world/robots.html">Interacting with robots</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../dynamic_world/index.html"><strong>Dynamic world</strong></a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
</ul>
</div>
</nav></div>
        <div class="sidebar-primary-item">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../index.html" class="nav-link">Get started</a></li>
    
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link"><strong>Fundamentals on CoppeliaSim</strong></a></li>
    
    <li class="breadcrumb-item active" aria-current="page">Minimal...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="minimal-example-synchronous-mode">
<span id="synchronous-mode"></span><h1>Minimal example: synchronous mode<a class="headerlink" href="#minimal-example-synchronous-mode" title="Link to this heading">#</a></h1>
<div class="admonition-goal admonition">
<p class="admonition-title">Goals</p>
<ol class="arabic simple">
<li><p>Understand the synchronous mode.</p></li>
<li><p>Know the methods:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">set_synchronous()</span></code>.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">trigger_next_simulation_step()</span></code>.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">wait_for_simulation_step_to_end()</span></code>.</p></li>
</ul>
</li>
</ol>
</div>
<p>We learned previously the asynchronous mode, the default operation mode. In this section we are going to see the
synchronous mode (now called stepped mode).  In this mode, the simulation will take into account the progress of your script.
To enable it, you need to use <code class="file docutils literal notranslate"><span class="pre">set_synchronous(true)</span></code>.</p>
<p>Once enabled, the simulation will wait for a trigger to start computing the next simulation step. Such a trigger is sent by the
method <code class="file docutils literal notranslate"><span class="pre">trigger_next_simulation_step()</span></code>. To keep the synchrony, we need to ensure that the simulation step is finished before sending the next trigger.
This can be done by using the method <code class="file docutils literal notranslate"><span class="pre">wait_for_simulation_step_to_end()</span></code>.</p>
<div class="admonition-example admonition">
<p class="admonition-title">Recommendation</p>
<p>Check <a class="reference external" href="https://www.coppeliarobotics.com/helpFiles/en/remoteApiModusOperandi.htm"><strong>Legacy remote API modus operandi</strong></a> to learn more about the synchronous mode.</p>
</div>
<section id="templates">
<h2>Templates:<a class="headerlink" href="#templates" title="Link to this heading">#</a></h2>
<p>The templates show how to establish communication with a CoppeliaSim scene in <code class="file docutils literal notranslate"><span class="pre">synchronous</span> <span class="pre">mode</span></code> using the default <code class="file docutils literal notranslate"><span class="pre">port</span></code>. It’s assumed that both the script and
the scene are running in the same computer (default <code class="file docutils literal notranslate"><span class="pre">IP</span></code>).</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-0">
Matlab</label><div class="sd-tab-content docutils">
<p><a class="reference download internal" download="" href="../../_downloads/c8871a55d684dddea5272e9bebeea2db/template_synchronous.m"><code class="xref download docutils literal notranslate"><span class="pre">template_synchronous.m</span></code></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">clear</span> <span class="nb">all</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="n">close</span> <span class="nb">all</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="n">clc</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="n">include_namespace_dq</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="n">vi</span> <span class="o">=</span> <span class="n">DQ_VrepInterface</span><span class="p">();</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="k">try</span>
<span class="linenos">10</span>    <span class="n">vi</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">19997</span><span class="p">);</span>
<span class="hll"><span class="linenos">11</span>    <span class="n">vi</span><span class="o">.</span><span class="n">set_synchronous</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
</span><span class="linenos">12</span>    <span class="n">vi</span><span class="o">.</span><span class="n">start_simulation</span><span class="p">();</span>
<span class="linenos">13</span>    <span class="n">pause</span><span class="p">(</span><span class="mf">0.1</span><span class="p">);</span>
<span class="linenos">14</span>    <span class="o">%-----------</span><span class="n">Your</span> <span class="n">code</span> <span class="n">here</span><span class="o">---------------------</span>
<span class="hll"><span class="linenos">15</span>    <span class="n">vi</span><span class="o">.</span><span class="n">trigger_next_simulation_step</span><span class="p">();</span>
</span><span class="hll"><span class="linenos">16</span>    <span class="n">vi</span><span class="o">.</span><span class="n">wait_for_simulation_step_to_end</span><span class="p">();</span>
</span><span class="linenos">17</span>    <span class="o">%----------------------------------------------</span>
<span class="linenos">18</span>    <span class="n">vi</span><span class="o">.</span><span class="n">stop_simulation</span><span class="p">();</span>
<span class="linenos">19</span>    <span class="n">vi</span><span class="o">.</span><span class="n">disconnect</span><span class="p">();</span>
<span class="linenos">20</span><span class="n">catch</span> <span class="n">ME</span>
<span class="linenos">21</span>    <span class="n">vi</span><span class="o">.</span><span class="n">stop_simulation</span><span class="p">();</span>
<span class="linenos">22</span>    <span class="n">vi</span><span class="o">.</span><span class="n">disconnect</span><span class="p">();</span>
<span class="linenos">23</span>    <span class="n">rethrow</span><span class="p">(</span><span class="n">ME</span><span class="p">)</span>
<span class="linenos">24</span><span class="n">end</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-1">
Python</label><div class="sd-tab-content docutils">
<p><a class="reference download internal" download="" href="../../_downloads/33229965d0da1f4eac4afb7f22447950/template_synchronous.py"><code class="xref download docutils literal notranslate"><span class="pre">template_synchronous.py</span></code></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/bin/python3</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">dqrobotics.interfaces.vrep</span> <span class="kn">import</span> <span class="n">DQ_VrepInterface</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">time</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 7</span>    <span class="n">vi</span> <span class="o">=</span> <span class="n">DQ_VrepInterface</span><span class="p">()</span>
<span class="linenos"> 8</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos"> 9</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">vi</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="mi">19997</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
<span class="linenos">10</span>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unable to connect to CoppeliaSim.&quot;</span><span class="p">)</span>
<span class="linenos">11</span>
<span class="hll"><span class="linenos">12</span>        <span class="n">vi</span><span class="o">.</span><span class="n">set_synchronous</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
</span><span class="linenos">13</span>        <span class="n">vi</span><span class="o">.</span><span class="n">start_simulation</span><span class="p">()</span>
<span class="linenos">14</span>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="linenos">15</span>        <span class="c1"># --------------Your code here----------------------------</span>
<span class="hll"><span class="linenos">16</span>        <span class="n">vi</span><span class="o">.</span><span class="n">trigger_next_simulation_step</span><span class="p">()</span>
</span><span class="hll"><span class="linenos">17</span>        <span class="n">vi</span><span class="o">.</span><span class="n">wait_for_simulation_step_to_end</span><span class="p">()</span>
</span><span class="linenos">18</span>        <span class="c1"># ---------------------------------------------------------</span>
<span class="linenos">19</span>
<span class="linenos">20</span>    <span class="k">except</span> <span class="p">(</span><span class="ne">Exception</span><span class="p">,</span> <span class="ne">KeyboardInterrupt</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="linenos">21</span>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="linenos">22</span>        <span class="k">pass</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="k">finally</span><span class="p">:</span>
<span class="linenos">25</span>        <span class="n">vi</span><span class="o">.</span><span class="n">stop_simulation</span><span class="p">()</span>
<span class="linenos">26</span>        <span class="n">vi</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
<span class="linenos">27</span>
<span class="linenos">28</span>
<span class="linenos">29</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">30</span>    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-2" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-2">
C++</label><div class="sd-tab-content docutils">
<p><a class="reference download internal" download="" href="../../_downloads/15c5cecf2ee927a297866ff170c19509/template_synchronous.cpp"><code class="xref download docutils literal notranslate"><span class="pre">template_synchronous.cpp</span></code></a></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;dqrobotics/interfaces/vrep/DQ_VrepInterface.h&gt;</span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="linenos"> 6</span><span class="p">{</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">vi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DQ_VrepInterface</span><span class="p">();</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">vi</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">19997</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="linenos">10</span><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="p">(</span><span class="s">&quot;Unable to connect to CoppeliaSim.&quot;</span><span class="p">);</span>
<span class="hll"><span class="linenos">11</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">set_synchronous</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
</span><span class="linenos">12</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">start_simulation</span><span class="p">();</span>
<span class="linenos">13</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span>
<span class="linenos">14</span><span class="w">        </span><span class="c1">//------------------Your code here--------------------------</span>
<span class="hll"><span class="linenos">15</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">trigger_next_simulation_step</span><span class="p">();</span>
</span><span class="hll"><span class="linenos">16</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">wait_for_simulation_step_to_end</span><span class="p">();</span>
</span><span class="linenos">17</span><span class="w">        </span><span class="c1">//---------------------------------------------------------</span>
<span class="linenos">18</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">stop_simulation</span><span class="p">();</span>
<span class="linenos">19</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">disconnect</span><span class="p">();</span>
<span class="linenos">20</span>
<span class="linenos">21</span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">22</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="linenos">23</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">stop_simulation</span><span class="p">();</span>
<span class="linenos">24</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">disconnect</span><span class="p">();</span>
<span class="linenos">25</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">26</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">27</span><span class="p">}</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" for="sd-tab-item-3">
CMake</label><div class="sd-tab-content docutils">
<div class="admonition-git admonition">
<p class="admonition-title">See also</p>
<p>CMake examples for Ubuntu, Windows and MacOS <a class="github reference external" href="https://github.com/dqrobotics/cpp-examples/blob/master/cmake/dqrobotics_dependencies.cmake">dqrobotics/cpp-examples</a></p>
</div>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="c"># Example CMAKE project for Ubuntu</span>
<span class="linenos"> 2</span><span class="nb">make_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.5</span><span class="p">)</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="nb">project</span><span class="p">(</span><span class="s">template_synchronous</span><span class="p">)</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="nb">set</span><span class="p">(</span><span class="s">CMAKE_CXX_STANDARD</span><span class="w"> </span><span class="s">11</span><span class="p">)</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">Threads</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="linenos"> 9</span><span class="nb">FIND_PACKAGE</span><span class="p">(</span><span class="s">Eigen3</span><span class="w"> </span><span class="s">REQUIRED</span><span class="p">)</span>
<span class="linenos">10</span><span class="nb">INCLUDE_DIRECTORIES</span><span class="p">(</span><span class="o">${</span><span class="nv">EIGEN3_INCLUDE_DIR</span><span class="o">}</span><span class="p">)</span>
<span class="linenos">11</span><span class="nb">ADD_COMPILE_OPTIONS</span><span class="p">(</span><span class="s">-Werror=return-type</span>
<span class="linenos">12</span><span class="w">                    </span><span class="s">-Wall</span><span class="w"> </span><span class="s">-Wextra</span><span class="w"> </span><span class="s">-Wmissing-declarations</span>
<span class="linenos">13</span><span class="w">                    </span><span class="s">-Wredundant-decls</span><span class="w"> </span><span class="s">-Woverloaded-virtual</span><span class="p">)</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="nb">add_executable</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="linenos">16</span><span class="w">               </span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span><span class="s">.cpp</span><span class="p">)</span>
<span class="linenos">17</span>
<span class="linenos">18</span><span class="nb">target_link_libraries</span><span class="p">(</span><span class="o">${</span><span class="nv">PROJECT_NAME</span><span class="o">}</span>
<span class="linenos">19</span><span class="w">                      </span><span class="s">dqrobotics</span>
<span class="linenos">20</span><span class="w">                      </span><span class="s">dqrobotics-interface-vrep</span>
<span class="linenos">21</span><span class="w">                      </span><span class="s">Threads::Threads</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="free-fall-experiment">
<h3>Free fall experiment<a class="headerlink" href="#free-fall-experiment" title="Link to this heading">#</a></h3>
<div class="line-block">
<div class="line"><br /></div>
</div>
<aside class="sidebar">
<p class="sidebar-title">Hint</p>
<img alt="../../_images/newton.png" src="../../_images/newton.png" />
<p>The expected height <span class="math notranslate nohighlight">\(y(t)\)</span> of the red ball is computed as <span class="math notranslate nohighlight">\(y(t) = y_{0} + v_{0}t + (1/2)gt^2\)</span>, where
<span class="math notranslate nohighlight">\(y_{0}\)</span>, <span class="math notranslate nohighlight">\(v_{0}\)</span>, <span class="math notranslate nohighlight">\(g\)</span>, <span class="math notranslate nohighlight">\(t\)</span> are the initial height, the initial velocity, the gravity,
and the elapsed simulation time, respectively.</p>
</aside>
<p>It’s time to test the synchronous mode! To do so, we are going to compare the height of the red ball (<code class="file docutils literal notranslate"><span class="pre">/Sphere</span></code>)
that is in free fall with the expected height after 0.25 s in the simulation time. The dynamics of the red ball is
handled by the engine and its behavior is affected by the simulation time step and the gravity.</p>
<p>In the DQ_Robotics_lab.ttt scene (see <a class="reference internal" href="../preamble/example_scene.html#example-scene"><span class="std std-ref">One scene to rule them all</span></a>), the engine is Newton, the simulation time step is <code class="file docutils literal notranslate"><span class="pre">50ms</span></code> and the gravity
is <code class="file docutils literal notranslate"><span class="pre">-9,81</span></code>.  You can modify those parameters, but you’ll need to update the examples as well.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As reported in <a class="github reference external" href="https://github.com/dqrobotics/python/pull/51">dqrobotics/python#51</a> the synchronous mode is working properly on Ubuntu
(Matlab, Python and C++) and on Windows (Matlab). Other combinations of OS and languages could not ensure the synchrony.</p>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-4">
Matlab</label><div class="sd-tab-content docutils">
<p><a class="reference download internal" download="" href="../../_downloads/e4ee2e46a29fc7f5e95a841abd776310/free_fall_test.m"><code class="xref download docutils literal notranslate"><span class="pre">free_fall_test.m</span></code></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">clear</span> <span class="nb">all</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="n">close</span> <span class="nb">all</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="n">clc</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="n">include_namespace_dq</span><span class="p">;</span>
<span class="linenos"> 8</span><span class="n">vi</span> <span class="o">=</span> <span class="n">DQ_VrepInterface</span><span class="p">();</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">try</span>
<span class="linenos">12</span>
<span class="linenos">13</span>    <span class="n">vi</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span> <span class="mi">19997</span><span class="p">);</span>
<span class="linenos">14</span>    <span class="n">vi</span><span class="o">.</span><span class="n">set_synchronous</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
<span class="linenos">15</span>    <span class="n">vi</span><span class="o">.</span><span class="n">start_simulation</span><span class="p">();</span>
<span class="linenos">16</span>    <span class="n">pause</span><span class="p">(</span><span class="mf">0.1</span><span class="p">);</span>
<span class="linenos">17</span>    <span class="n">p0</span> <span class="o">=</span> <span class="n">vec3</span><span class="p">(</span><span class="n">translation</span><span class="p">(</span><span class="n">vi</span><span class="o">.</span><span class="n">get_object_pose</span><span class="p">(</span><span class="s1">&#39;/Sphere&#39;</span><span class="p">)));</span>
<span class="linenos">18</span>    <span class="n">y0</span> <span class="o">=</span> <span class="n">p0</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="linenos">19</span>    <span class="n">time_simulation_step</span> <span class="o">=</span> <span class="mf">0.05</span><span class="p">;</span>
<span class="linenos">20</span>    <span class="n">disp</span><span class="p">(</span><span class="s1">&#39;---------------------------------&#39;</span><span class="p">)</span>
<span class="linenos">21</span>    <span class="n">disp</span><span class="p">([</span><span class="s1">&#39;Initial height: &#39;</span><span class="p">,</span><span class="n">num2str</span><span class="p">(</span><span class="n">y0</span><span class="p">)])</span>
<span class="linenos">22</span>    <span class="n">disp</span><span class="p">(</span><span class="s1">&#39;---------------------------------&#39;</span><span class="p">)</span>
<span class="linenos">23</span>
<span class="linenos">24</span>    <span class="k">for</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span>
<span class="linenos">25</span>        <span class="n">t</span> <span class="o">=</span> <span class="n">i</span><span class="o">*</span><span class="n">time_simulation_step</span><span class="p">;</span>
<span class="linenos">26</span>        <span class="n">p</span> <span class="o">=</span> <span class="n">vec3</span><span class="p">(</span><span class="n">translation</span><span class="p">(</span><span class="n">vi</span><span class="o">.</span><span class="n">get_object_pose</span><span class="p">(</span><span class="s1">&#39;/Sphere&#39;</span><span class="p">)));</span>
<span class="linenos">27</span>        <span class="n">y_sim</span> <span class="o">=</span> <span class="n">p</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="linenos">28</span>        <span class="n">y_est</span> <span class="o">=</span> <span class="n">y0</span> <span class="o">-</span> <span class="mf">0.5</span><span class="o">*</span><span class="mf">9.81</span><span class="o">*</span><span class="n">t</span><span class="o">^</span><span class="mi">2</span><span class="p">;</span>
<span class="linenos">29</span>        <span class="n">vi</span><span class="o">.</span><span class="n">trigger_next_simulation_step</span><span class="p">();</span>
<span class="linenos">30</span>        <span class="n">vi</span><span class="o">.</span><span class="n">wait_for_simulation_step_to_end</span><span class="p">();</span>
<span class="linenos">31</span>    <span class="n">end</span>
<span class="linenos">32</span>    <span class="n">disp</span><span class="p">([</span><span class="s1">&#39;Elapsed time: &#39;</span><span class="p">,</span><span class="n">num2str</span><span class="p">(</span><span class="n">t</span><span class="p">)])</span>
<span class="linenos">33</span>    <span class="n">disp</span><span class="p">([</span><span class="s1">&#39;Estimated height: &#39;</span><span class="p">,</span><span class="n">num2str</span><span class="p">(</span><span class="n">y_est</span><span class="p">),</span><span class="s1">&#39; Measured height: &#39;</span><span class="p">,</span> <span class="n">num2str</span><span class="p">(</span><span class="n">y_sim</span><span class="p">)])</span>
<span class="linenos">34</span>    <span class="n">vi</span><span class="o">.</span><span class="n">stop_simulation</span><span class="p">();</span>
<span class="linenos">35</span>    <span class="n">vi</span><span class="o">.</span><span class="n">disconnect</span><span class="p">();</span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="n">catch</span> <span class="n">ME</span>
<span class="linenos">38</span>
<span class="linenos">39</span>    <span class="n">vi</span><span class="o">.</span><span class="n">stop_simulation</span><span class="p">();</span>
<span class="linenos">40</span>    <span class="n">vi</span><span class="o">.</span><span class="n">disconnect</span><span class="p">();</span>
<span class="linenos">41</span>    <span class="n">rethrow</span><span class="p">(</span><span class="n">ME</span><span class="p">)</span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="n">end</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-5">
Python</label><div class="sd-tab-content docutils">
<p><a class="reference download internal" download="" href="../../_downloads/38a82abfb3ba01aff5963026097b365f/free_fall_test.py"><code class="xref download docutils literal notranslate"><span class="pre">free_fall_test.py</span></code></a></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="ch">#!/bin/python3</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">dqrobotics.interfaces.vrep</span> <span class="kn">import</span> <span class="n">DQ_VrepInterface</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">time</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="k">def</span> <span class="nf">main</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="linenos"> 8</span>    <span class="n">vi</span> <span class="o">=</span> <span class="n">DQ_VrepInterface</span><span class="p">()</span>
<span class="linenos"> 9</span>    <span class="k">try</span><span class="p">:</span>
<span class="linenos">10</span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">vi</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;127.0.0.1&quot;</span><span class="p">,</span> <span class="mi">19997</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>
<span class="linenos">11</span>            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Unable to connect to CoppeliaSim.&quot;</span><span class="p">)</span>
<span class="linenos">12</span>
<span class="linenos">13</span>        <span class="n">vi</span><span class="o">.</span><span class="n">set_synchronous</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="linenos">14</span>        <span class="n">vi</span><span class="o">.</span><span class="n">start_simulation</span><span class="p">()</span>
<span class="linenos">15</span>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="n">time_simulation_step</span> <span class="o">=</span> <span class="mf">0.05</span>
<span class="linenos">17</span>        <span class="n">y_0</span> <span class="o">=</span> <span class="n">vi</span><span class="o">.</span><span class="n">get_object_pose</span><span class="p">(</span><span class="s2">&quot;/Sphere&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">translation</span><span class="p">()</span><span class="o">.</span><span class="n">vec3</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
<span class="linenos">18</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---------------------------&quot;</span><span class="p">)</span>
<span class="linenos">19</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Initial height: &quot;</span><span class="p">,</span> <span class="n">y_0</span><span class="p">)</span>
<span class="linenos">20</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;---------------------------&quot;</span><span class="p">)</span>
<span class="linenos">21</span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
<span class="linenos">22</span>            <span class="n">t</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">time_simulation_step</span>
<span class="linenos">23</span>            <span class="n">y_sim</span> <span class="o">=</span> <span class="n">vi</span><span class="o">.</span><span class="n">get_object_pose</span><span class="p">(</span><span class="s2">&quot;/Sphere&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">translation</span><span class="p">()</span><span class="o">.</span><span class="n">vec3</span><span class="p">()[</span><span class="mi">2</span><span class="p">]</span>
<span class="linenos">24</span>            <span class="n">y_est</span> <span class="o">=</span> <span class="n">y_0</span> <span class="o">-</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="mf">9.81</span> <span class="o">*</span> <span class="nb">pow</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">25</span>            <span class="n">vi</span><span class="o">.</span><span class="n">trigger_next_simulation_step</span><span class="p">()</span>
<span class="linenos">26</span>            <span class="n">vi</span><span class="o">.</span><span class="n">wait_for_simulation_step_to_end</span><span class="p">()</span>
<span class="linenos">27</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Elapsed time: &quot;</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>
<span class="linenos">28</span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Estimated height: &quot;</span><span class="p">,</span> <span class="n">y_est</span><span class="p">,</span> <span class="s2">&quot;Measured height: &quot;</span><span class="p">,</span> <span class="n">y_sim</span><span class="p">)</span>
<span class="linenos">29</span>
<span class="linenos">30</span>    <span class="k">except</span> <span class="p">(</span><span class="ne">Exception</span><span class="p">,</span> <span class="ne">KeyboardInterrupt</span><span class="p">)</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="linenos">31</span>        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="linenos">32</span>        <span class="k">pass</span>
<span class="linenos">33</span>
<span class="linenos">34</span>    <span class="k">finally</span><span class="p">:</span>
<span class="linenos">35</span>        <span class="n">vi</span><span class="o">.</span><span class="n">stop_simulation</span><span class="p">()</span>
<span class="linenos">36</span>        <span class="n">vi</span><span class="o">.</span><span class="n">disconnect</span><span class="p">()</span>
<span class="linenos">37</span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
<span class="linenos">40</span>    <span class="n">main</span><span class="p">()</span>
<span class="linenos">41</span>
<span class="linenos">42</span>
<span class="linenos">43</span>
</pre></div>
</div>
</div>
<input id="sd-tab-item-6" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" for="sd-tab-item-6">
C++</label><div class="sd-tab-content docutils">
<p><a class="reference download internal" download="" href="../../_downloads/6e54aaa48e4f079b952527c93db713a3/free_fall_test.cpp"><code class="xref download docutils literal notranslate"><span class="pre">free_fall_test.cpp</span></code></a></p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="linenos"> 2</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;dqrobotics/interfaces/vrep/DQ_VrepInterface.h&gt;</span>
<span class="linenos"> 3</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;thread&gt;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<span class="linenos"> 6</span><span class="p">{</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">vi</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DQ_VrepInterface</span><span class="p">();</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 9</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">vi</span><span class="p">.</span><span class="n">connect</span><span class="p">(</span><span class="s">&quot;127.0.0.1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">19997</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="linenos">10</span><span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">runtime_error</span><span class="p">(</span><span class="s">&quot;Unable to connect to CoppeliaSim.&quot;</span><span class="p">);</span>
<span class="linenos">11</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">set_synchronous</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span>
<span class="linenos">12</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">start_simulation</span><span class="p">();</span>
<span class="linenos">13</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span>
<span class="linenos">14</span><span class="w">        </span><span class="c1">//---------------Your code here----------------------------</span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">time_simulation_step</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.05</span><span class="p">;</span>
<span class="linenos">17</span><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">y_0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vi</span><span class="p">.</span><span class="n">get_object_pose</span><span class="p">(</span><span class="s">&quot;/Sphere&quot;</span><span class="p">).</span><span class="n">translation</span><span class="p">().</span><span class="n">vec3</span><span class="p">()[</span><span class="mi">2</span><span class="p">];</span>
<span class="linenos">18</span><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">y_sim</span><span class="p">;</span>
<span class="linenos">19</span><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">y_est</span><span class="p">;</span>
<span class="linenos">20</span><span class="w">        </span><span class="kt">double</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="linenos">21</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;-----------------&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="linenos">22</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Initial height: &quot;</span><span class="o">&lt;&lt;</span><span class="n">y_0</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="linenos">23</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;-----------------&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="linenos">24</span>
<span class="linenos">25</span><span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">&lt;=</span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<span class="linenos">26</span><span class="w">        </span><span class="p">{</span>
<span class="linenos">27</span><span class="w">            </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="o">*</span><span class="n">time_simulation_step</span><span class="p">;</span>
<span class="linenos">28</span><span class="w">            </span><span class="n">y_sim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vi</span><span class="p">.</span><span class="n">get_object_pose</span><span class="p">(</span><span class="s">&quot;/Sphere&quot;</span><span class="p">).</span><span class="n">translation</span><span class="p">().</span><span class="n">vec3</span><span class="p">()[</span><span class="mi">2</span><span class="p">];</span>
<span class="linenos">29</span><span class="w">            </span><span class="n">y_est</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y_0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mf">9.81</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">pow</span><span class="p">(</span><span class="n">t</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="linenos">30</span><span class="w">            </span><span class="n">vi</span><span class="p">.</span><span class="n">trigger_next_simulation_step</span><span class="p">();</span>
<span class="linenos">31</span><span class="w">            </span><span class="n">vi</span><span class="p">.</span><span class="n">wait_for_simulation_step_to_end</span><span class="p">();</span>
<span class="linenos">32</span><span class="w">        </span><span class="p">}</span>
<span class="linenos">33</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Elapsed time: &quot;</span><span class="o">&lt;&lt;</span><span class="n">t</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="linenos">34</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;Estimated height: &quot;</span><span class="o">&lt;&lt;</span><span class="n">y_est</span><span class="o">&lt;&lt;</span><span class="s">&quot;, Measured height: &quot;</span><span class="o">&lt;&lt;</span><span class="n">y_sim</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="linenos">35</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">stop_simulation</span><span class="p">();</span>
<span class="linenos">36</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">disconnect</span><span class="p">();</span>
<span class="linenos">37</span><span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">exception</span><span class="o">&amp;</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">38</span><span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="linenos">39</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">stop_simulation</span><span class="p">();</span>
<span class="linenos">40</span><span class="w">        </span><span class="n">vi</span><span class="p">.</span><span class="n">disconnect</span><span class="p">();</span>
<span class="linenos">41</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">42</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">43</span><span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>You will have the following output:</p>
<div class="sd-container-fluid sd-sphinx-override sd-mb-4 docutils">
<div class="sd-row docutils">
<div class="sd-col sd-d-flex-row docutils">
<div class="sd-card sd-sphinx-override sd-w-100 sd-shadow-sm docutils">
<div class="sd-card-body docutils">
<div class="line-block">
<div class="line">———————————</div>
<div class="line">Initial height: 1</div>
<div class="line">———————————</div>
<div class="line">Elapsed time: 0.25</div>
<div class="line">Estimated height: 0.69344 Measured height: 0.68731</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="admonition-git admonition">
<p class="admonition-title">See also</p>
<p>Synchronous test <a class="github reference external" href="https://github.com/dqrobotics/python-examples/tree/master/vrep_interface_tests/synchronous_test">dqrobotics/python-examples</a></p>
</div>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="minimal_example.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Minimal example: asynchronous mode</p>
      </div>
    </a>
    <a class="right-next"
       href="../kinematic_world/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><strong>Kinematic world</strong></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#templates">Templates:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#free-fall-experiment">Free fall experiment</a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/get_started/coppeliasim_basics/synchronous.rst">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2024 Juan Jose Quiroz Omana.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.4.7.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>